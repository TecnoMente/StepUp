// Prisma schema for StepUp ATS Resume Generator
// SQLite for local development (zero cost)

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Session {
  id         String   @id @default(cuid())
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  // Raw text inputs
  jdText      String?  // Job Description
  resumeText  String?  // Parsed resume text
  extraText   String?  // Additional projects/skills
  companyName String?  // Company name for this application
  position    String?  // Position/job title for this application

  // ATS terms extracted from JD
  terms      String   @default("[]") // JSON array of strings

  // Generated outputs (stored as JSON)
  resumeJson String?  // TailoredResume JSON
  letterJson String?  // TailoredCoverLetter JSON

  // PDF rendering options (stored as JSON)
  resumePdfOptions String? // ResumePDFOptions JSON (font sizes, etc. to ensure one-page fit)

  // Metadata
  atsScore   Int?     // Number of matched terms

  @@index([createdAt])
}
